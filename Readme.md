# Main Infrastructure Pedisoft

This repository contains the main infrastructure for Pedisoft system. Two projects are defined:

- Apigateway
- Discovery

## ApiGateway
 A Springboot project using SpringCloud Gateway. It creates dynamic routes based on the service discovery. It also protects all the routes using OIDC, the apigateway checks the JWT generated by the UserManager microservice so any service that is accessed by the gateway will be protected by default
 
## Discovery
A Springboot project using SpringCloud Eureka for discovery service in all the architecture. 

 
# Running

The project was designed to be executed in a containerized environment. In this repo [Docker](https://www.docker.com/) was used for it, but Podman or Kubernetes could be used with little configuration. The compose file builds and executes both projects SpringBoot web server without any additional configuration, simply run:

```sh
docker compose up -d
```

# Configuration
## Environment
the *.env_template* file contains the environment variables that should be defined in order to run, should be edited according to the needs.

